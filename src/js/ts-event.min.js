!function(){function t(e,n){this.id=e.identifier,this.timeStamp=n.timeStamp,this.touches=[],this.lastTouches=t.lastTouches[this.id],this.add(e,n)}function e(t){this.timeStamp=t.timeStamp,this.touches=[],this.clientX=null,this.clientY=null,this.clientRay=null,this.pageX=null,this.pageY=null,this.pageRay=null,this.screenX=null,this.screenY=null,this.screenRay=null,this.rotationAngle=null}function n(t){this.element=t,this.fingers={},this.circles=[],this.listener={},n.add(this.init())}Object.assign(t,{lastTouches:{},prototype:{constructor:t,add:function(t,e){return t.srcEvent=e,this.touches.push(t),this},rmv:function(){return t.lastTouches[this.id]=this.touches,this}}}),Object.assign(e,{diff:function(t,e){var n,i=!1;if(t.touches.length==e.touches.length){for(n in t)if("touches"!=n&&"timeStamp"!=n&&t[n]!==e[n]){i=!0;break}}else i=!0;return i},prototype:{constructor:e,init:function(t,e){var n,i=this;return["client","page","screen"].forEach(function(n){i[n+"X"]=t[n+"X"]+(e[n+"X"]-t[n+"X"])/2,i[n+"Y"]=t[n+"Y"]+(e[n+"Y"]-t[n+"Y"])/2,i[n+"Ray"]=Math.sqrt(Math.pow(t[n+"X"]-e[n+"X"],2)+Math.pow(t[n+"Y"]-e[n+"Y"],2))/2}),n=e.screenY-t.screenY,this.rotationAngle=(n>0?2*Math.PI:0)+Math.atan2(e.screenX-t.screenX,e.screenY-t.screenY),this.touches.push(t,e),this}}}),Object.assign(n,{TAP:200,DOUBLETAP:400,HOLD:1e3,aManager:[],add:function(t){return t.id=this.aManager.push(t),t.element.setAttribute("data-ts-manager",t.id),this},get:function(t){var e=t.getAttribute("data-ts-manager");if(e)return this.aManager[e-1]},start:function(t){var e=n.get(this),i=e.addFinger(t),s=(e.updCircle(t),{});e.hasListener("start")&&(s.start=i),e.hasListener("hold")&&setTimeout(function(){var n=[];i.forEach(function(t){1==t.touches.length&&e.fingers[t.id]&&e.fingers[t.id]===t&&n.push(t)}),n.length&&e.event("hold",t,n)},n.HOLD),e.event(s,t)},move:function(t){var e,i=n.get(this),s=i.updFinger(t),r=i.updCircle(t),h={};if(i.hasListener("move")&&(h.move=s),i.hasListener("swipeTop","swipeBottom","swipeLeft","swipeRight")&&s.forEach(function(t){var n=t.touches.length,i=t.touches[n-1].screenX-t.touches[n-2].screenX,s=t.touches[n-1].screenY-t.touches[n-2].screenY;0!=s&&(h[e=s<0?"swipeTop":"swipeBottom"]=h[e]||[],h[e].push(t)),0!=i&&(h[e=i<0?"swipeLeft":"swipeRight"]=h[e]||[],h[e].push(t))}),i.hasListener("pinch","spread","rotate")&&r){var c=i.circles.length,o=i.circles[c-1],a=i.circles[c-2],u=[];o.touches.forEach(function(t){s.forEach(function(e){e.id==t.identifier&&u.push(e)})}),o.screenRay!=a.screenRay&&(e=a.screenRay>o.screenRay?"pinch":"spread",h[e]=u),o.rotationAngle!=a.rotationAngle&&(h.rotate=u)}i.event(h,t)},end:function(t){var e,i=n.get(this),s=i.rmvFinger(t),r=(i.updCircle(t),{});i.hasListener("end")&&(r.end=s),i.hasListener("press","tap","doubleTap")&&s.forEach(function(t){if(2==t.touches.length){var i=t.touches[1].srcEvent.timeStamp-t.touches[0].srcEvent.timeStamp,s=t.lastTouches;i>n.TAP?e="press":s&&2==s.length?(i=t.touches[1].srcEvent.timeStamp-s[0].srcEvent.timeStamp,e=i>n.DOUBLETAP?"tap":"doubleTap"):e="tap",r[e]=r[e]||[],r[e].push(t)}}),i.event(r,t)},prototype:{constructor:n,init:function(){return this.element.addEventListener("touchstart",n.start,!1),this.element.addEventListener("touchmove",n.move,!1),this.element.addEventListener("touchend",n.end,!1),this.element.addEventListener("touchcancel",n.end,!1),this},addFinger:function(e){var n=this,i=[];return Array.prototype.forEach.call(e.changedTouches,function(s){var r=n.fingers[s.identifier]=new t(s,e);i.push(r)}),i},updFinger:function(t){var e=this,n=[];return Array.prototype.forEach.call(t.changedTouches,function(i){var s=e.fingers[i.identifier];n.push(s.add(i,t))}),n},rmvFinger:function(t){var e=this,n=[];return Array.prototype.forEach.call(t.changedTouches,function(i){var s=e.fingers[i.identifier];n.push(s.add(i,t).rmv()),delete e.fingers[i.identifier]}),n},addCircle:function(t,n){n=n||[];var i=new e(t),s=!1;return 2==n.length&&(i.init(n[0].touches[n[0].touches.length-1],n[1].touches[n[1].touches.length-1]),s=!0),this.circles.length&&(s=e.diff(i,this.circles[this.circles.length-1])),s&&this.circles.push(i),s},updCircle:function(t){var e,n=[],i=[],s=0;for(e in this.fingers)n.push(this.fingers[e]),s++;if(s>2)for(var r,h,c,o,a=0,u=0;a<s;a++)for(r=a+1;r<s;r++)h=n[a].touches[n[a].touches.length-1],c=n[r].touches[n[r].touches.length-1],(o=Math.sqrt(Math.pow(h.screenX-c.screenX,2)+Math.pow(h.screenY-c.screenY,2)))>u&&(u=o,i=[n[a],n[r]]);else 2==s&&(i=n);return this.addCircle(t,i)},on:function(t,e){var n=t||{};for(t in e&&(n={},t.split(" ").forEach(function(t){n[t]=e})),n)(this.listener[t]=this.listener[t]||[]).push(n[t]);return this},off:function(t,e){var n,i,s=t;for(t in e&&(s={},t.split(" ").forEach(function(t){s[t]=e})),s)null!=(i=(n=this.listener[t])&&n.indexOf(s))&&-1!=i&&n.splice(i,1);return this},trigger:function(){var t=this,e=Array.prototype.shift.call(arguments),n=arguments;return e.split(" ").forEach(function(e){var i,s=t.listener[e],r=0;if(s)for(i=s.length;r<i;r++)s[r].apply(t.element,n)}),this},event:function(t,e,n){var i=t;for(t in n&&(i={},t.split(" ").forEach(function(t){i[t]=n})),i)this.trigger(t,{type:t,srcEvent:e,manager:this,fingers:i[t]});return this},hasListener:function(){for(var t=arguments.length,e=!1,n=0;n<t;n++)if(this.listener[arguments[n]]&&this.listener[arguments[n]].length){e=!0;break}return e}}}),window.TSEvent={can:"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,addListener:function(t,e,i){return!!this.can&&(n.get(t)||new n(t)).on(e,i)},removeListener:function(){if(this.can){var t=n.get(elm);return t&&t.off(evt,foo)}return!1}}}();